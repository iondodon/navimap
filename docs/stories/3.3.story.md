# Story 3.3: App Store Deployment and Open Source Release

## Status

Draft

## Story

**As a** project stakeholder,
**I want** the application properly configured for distribution,
**so that** users can access it through standard channels and developers can contribute.

## Acceptance Criteria

1. Android APK build configuration for Google Play Store
2. iOS build configuration for Apple App Store
3. Appropriate app icons and store metadata
4. Privacy policy compliance (no data collection - NFR6)
5. Open source license configuration (MIT or GPL v3 - NFR10)
6. CI/CD pipeline setup for automated builds
7. Documentation for contributors and deployment process

## Tasks / Subtasks

- [ ] Task 1: Android Play Store Configuration (AC: 1)

  - [ ] Configure android/app/build.gradle for release builds
  - [ ] Set up app signing with upload key for Play Console
  - [ ] Configure release build variants with proper minification
  - [ ] Add app bundle (.aab) build configuration for Play Store
  - [ ] Configure versioning strategy: versionCode and versionName
  - [ ] Add Play Store metadata: descriptions, screenshots, categorization

- [ ] Task 2: iOS App Store Configuration (AC: 2)

  - [ ] Configure ios/Runner.xcodeproj for App Store builds
  - [ ] Set up code signing with distribution certificates
  - [ ] Configure release schemes and build configurations
  - [ ] Add App Store Connect metadata and app information
  - [ ] Configure iOS app versioning: CFBundleVersion and CFBundleShortVersionString
  - [ ] Set up TestFlight beta testing configuration

- [ ] Task 3: App Icons and Store Assets (AC: 3)

  - [ ] Design and create app icons for Android (various DPI)
  - [ ] Design and create app icons for iOS (various sizes)
  - [ ] Create store screenshots for both platforms
  - [ ] Design promotional graphics and store listings
  - [ ] Add app icons to appropriate platform directories
  - [ ] Validate icon compliance with platform guidelines

- [ ] Task 4: Privacy Policy and Data Compliance (AC: 4)

  - [ ] Create privacy policy document stating no data collection (NFR6)
  - [ ] Add privacy policy to app store listings
  - [ ] Configure app permissions to minimal required set
  - [ ] Document data handling practices for store review
  - [ ] Add privacy policy link to app settings or about screen
  - [ ] Validate compliance with GDPR and platform privacy requirements

- [ ] Task 5: Open Source License Configuration (AC: 5)

  - [ ] Choose between MIT or GPL v3 license per NFR10
  - [ ] Add LICENSE file to project root
  - [ ] Update pubspec.yaml with license information
  - [ ] Add license headers to source files as required
  - [ ] Configure third-party license acknowledgments
  - [ ] Document license choice rationale and implications

- [ ] Task 6: CI/CD Pipeline Setup (AC: 6)

  - [ ] Configure GitHub Actions workflow for automated builds
  - [ ] Set up Android build pipeline with signing and testing
  - [ ] Set up iOS build pipeline with certificates and provisioning
  - [ ] Add automated testing execution in CI pipeline
  - [ ] Configure artifact storage for build outputs
  - [ ] Set up automated deployment triggers and approvals

- [ ] Task 7: Documentation and Contributor Guidelines (AC: 7)
  - [ ] Create comprehensive README.md with project overview
  - [ ] Add CONTRIBUTING.md with development setup instructions
  - [ ] Document build and deployment processes
  - [ ] Create issue templates for bug reports and feature requests
  - [ ] Add code of conduct for open source community
  - [ ] Document release process and versioning strategy

## Dev Notes

### Android Deployment Configuration

[Source: architecture/deployment.md and architecture/file-and-folder-structure.md]

- **Build Configuration**: Release builds with R8 minification and obfuscation enabled
- **App Signing**: Upload key for Play Console, release signing managed by Google
- **App Bundle**: Prefer .aab format for Play Store to enable dynamic delivery
- **Minimum SDK**: API 24 (Android 7.0) as configured in build.gradle
- **Target SDK**: Latest stable Android API level for maximum compatibility

### iOS Deployment Configuration

[Source: architecture/deployment.md and architecture/file-and-folder-structure.md]

- **Build Configuration**: Release schemes with proper optimization settings
- **Code Signing**: Distribution certificates and provisioning profiles
- **Deployment Target**: iOS 12.0+ as configured in project settings
- **App Store Connect**: Metadata, app information, and TestFlight configuration
- **Archive Validation**: Ensure builds pass App Store validation requirements

### Privacy Policy Requirements

[Source: NFR6 - No data collection]

- **Data Collection**: Explicitly state no user data is collected or stored
- **Location Services**: Explain GPS usage is local-only for navigation functionality
- **Third-Party Services**: Document OSRM/GraphHopper API usage (no personal data sent)
- **Analytics**: Confirm no analytics, crash reporting, or user tracking
- **Compliance**: Meet GDPR, CCPA, and platform privacy requirements

### Open Source License Strategy

[Source: NFR10 - MIT or GPL v3]

- **License Choice**: MIT for maximum permissiveness vs GPL v3 for copyleft protection
- **License File**: Standard LICENSE file in project root with full text
- **Source Headers**: Add SPDX license identifiers to source files if required
- **Third-Party Licenses**: Document flutter_map, geolocator, and other dependency licenses
- **License Compatibility**: Ensure all dependencies are compatible with chosen license

### CI/CD Pipeline Architecture

[Source: architecture/tech-stack.md - GitHub Actions]

- **GitHub Actions**: Free for public repositories, good Flutter support
- **Build Matrix**: Separate workflows for Android and iOS builds
- **Testing Integration**: Run unit, widget, and integration tests before builds
- **Artifact Management**: Store signed APKs/IPAs for release deployment
- **Security**: Secure storage of signing keys and certificates in GitHub Secrets

### App Store Metadata Requirements

- **App Name**: "NaviMap" - simple, clear navigation app name
- **Description**: Focus on offline-capable, open-source navigation
- **Keywords**: Navigation, Maps, GPS, Routing, Offline, Open Source
- **Screenshots**: Demonstrate key features: map display, location, routing
- **Categories**: Navigation (primary), Travel (secondary)
- **Age Rating**: 4+ (no objectionable content)

### Documentation Structure

- **README.md**: Project overview, features, quick start, build instructions
- **CONTRIBUTING.md**: Development setup, coding standards, pull request process
- **LICENSE**: Full license text (MIT or GPL v3)
- **CHANGELOG.md**: Version history and release notes
- **docs/**: Architecture documentation, API references, deployment guides

### Release Management Strategy

- **Versioning**: Semantic versioning (major.minor.patch)
- **Release Process**: GitHub releases with automated build artifacts
- **Beta Testing**: TestFlight for iOS, Internal Testing for Android
- **Rollout Strategy**: Gradual rollout percentages for stability monitoring
- **Hotfix Process**: Fast-track process for critical bug fixes

### Store Submission Checklist

- **Functionality**: All features work as described in store listing
- **Performance**: Meets platform performance guidelines
- **Design**: Follows platform design guidelines (Material Design, Human Interface)
- **Content**: No objectionable content, appropriate age rating
- **Metadata**: Complete and accurate app information
- **Privacy**: Privacy policy accessible and compliant

## Testing

### Deployment Testing

[Source: architecture/testing-strategy.md]

- **Build Validation**: Automated testing of release build configurations
- **Store Submission**: Test submission process to both app stores
- **Installation Testing**: Install from stores on fresh devices
- **Update Testing**: Test app update process from previous versions
- **Platform Compliance**: Validate compliance with store guidelines

### Release Pipeline Testing

- **CI/CD Validation**: Test automated build and deployment pipelines
- **Signing Verification**: Validate app signing and certificate configurations
- **Artifact Testing**: Test built APKs and IPAs on target devices
- **Beta Distribution**: TestFlight and Google Play Internal Testing validation
- **Release Automation**: Test automated release deployment triggers

### Documentation Testing

- **Setup Instructions**: Validate development setup instructions work correctly
- **Build Instructions**: Test build process documentation accuracy
- **Contributor Onboarding**: Test new contributor experience with documentation
- **Deployment Process**: Validate deployment documentation completeness
- **License Compliance**: Verify license file and headers are correct

### Store Compliance Testing

- **Privacy Policy**: Validate privacy policy accuracy and accessibility
- **App Store Guidelines**: Ensure compliance with platform-specific guidelines
- **Content Review**: Test app content against store content policies
- **Metadata Accuracy**: Verify store listing information matches app functionality
- **Age Rating**: Validate age rating appropriateness for app content

### Open Source Preparation

- **License Validation**: Ensure license compatibility across all dependencies
- **Code Quality**: Final code review for open source release readiness
- **Documentation Completeness**: Verify all necessary documentation exists
- **Community Guidelines**: Test issue templates and contribution workflows
- **Repository Setup**: Configure GitHub repository for open source community

## Change Log

| Date       | Version | Description            | Author             |
| ---------- | ------- | ---------------------- | ------------------ |
| 2025-11-11 | 1.0     | Initial story creation | Bob (Scrum Master) |

## Dev Agent Record

_This section will be populated during implementation_

## QA Results

_This section will be populated during QA review_
